name: All Tests

on:
  push:
    branches: [ cole_test_actions, master ]
  pull_request:
    branches: [ master ]

jobs:
  build:
    runs-on: ubuntu-16.04
    steps:
    - uses: actions/checkout@v2
    - name: Compile
      run: make -j8
    - name: Bedrock Tests
      run: cd test && ./test -threads 8
    - name: Cluster Tests
      run: cd clustertests && ./clustertest -threads 8
